/**
 * Copyright (c) 2013 Paul Mohr, www.sopamo.de
 * Licence: MIT http://www.opensource.org/licenses/mit-license.php
 **/
(function(e,t){var n="KeepInWindow",r="Paul Mohr",i={direction:"vertical",maxHeight:false,marginTop:false,top:false,paddingTop:0,animationSpeed:600},s={init:function(t){var r=e.extend({},i,t);return this.each(function(){var t=e(this),i,s,o,u,a,f;i=t.offset();if(r.top===false)r.top=i.top;if(isNaN(r.top))r.top=0;if(r.marginTop===false)r.marginTop=parseInt(t.css("marginTop"));if(isNaN(r.marginTop))r.marginTop=0;r.maxHeight=e(document).height();t.data(n,r);t.data("isHover",0);t.hover(function(){t.data("isHover",1)},function(){t.data("isHover",0)});e(window).scroll(function(){u=e(window).scrollTop();i=t.offset();s=i.top;o=u-s;f=parseInt(t.css("marginTop"));if(isNaN(f))f=0;if(o>0){a=f+o}else if(o<0){a=f-o*-1}a+=r.paddingTop;a=Math.ceil(a);if(r.maxHeight>a+t.height()+r.top&&!t.data("isHover")&&t.height()+a+20<t.parent().height()){if(a>r.marginTop){t.stop().animate({marginTop:a},r.animationSpeed)}}if(a<=r.marginTop){t.stop().animate({marginTop:r.marginTop},r.animationSpeed)}});return true})},stop:function(){e(window).unbind("scroll")}};e.fn.keepinwindow=function(t){if(s[t]){return s[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return s.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.keepInWindow")}}})(jQuery)
